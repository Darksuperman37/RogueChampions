{"remainingRequest":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\ts-loader\\index.js??ref--14-3!C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\src\\lib\\game.ts","dependencies":[{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\src\\lib\\game.ts","mtime":1629962338476},{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCB7IFZpbGxhaW5zTGlzdCwgVmlsbGFpbnNNYXAgfSBmcm9tICJAL2NvbnN0cy92aWxsYWlucyI7CmltcG9ydCB7IGdldFJhbmRvbUludCwgcGVyY2VudENoYW5jZSwgcmFuZG9tSXRlbSwgcmFuZG9tSXRlbXNFeGNsdWRpbmcgfSBmcm9tICJAL2xpYi9yYW5kb20iOwppbXBvcnQgeyBFbmNvdW50ZXJTZXRzTGlzdCwgRXhwZXJ0IH0gZnJvbSAiQC9jb25zdHMvZW5jb3VudGVyc2V0cyI7CmltcG9ydCB7IHJhbmRvbUNoYWxsZW5nZSB9IGZyb20gIkAvY29uc3RzL2NoYWxsZW5nZXMiOwppbXBvcnQgeyBVcGdyYWRlQ2F0ZWdvcmllc0xpc3QgfSBmcm9tICJAL2NvbnN0cy91cGdyYWRlcyI7CmV4cG9ydCB2YXIgZ2VuZXJhdGVUYXJnZXRHYW1lID0gZnVuY3Rpb24gZ2VuZXJhdGVUYXJnZXRHYW1lKG1pbkRpZmZpY3VsdHksIG1heERpZmZpY3VsdHkpIHsKICB2YXIgY291bnQgPSAwOwogIHZhciBtYXhUcmllcyA9IDUwMDsKICB2YXIgdmlsbGFpbiA9IHJhbmRvbUl0ZW0oVmlsbGFpbnNMaXN0KTsKICB2YXIgY2xvc2VzdCA9IGdlbmVyYXRlR2FtZSh2aWxsYWluKTsKICB2YXIgdGFyZ2V0RGlmZmljdWx0eSA9IChtaW5EaWZmaWN1bHR5ICsgbWF4RGlmZmljdWx0eSkgLyAyOwoKICBkbyB7CiAgICBjb3VudCsrOwoKICAgIHZhciBfdmlsbGFpbiA9IHJhbmRvbUl0ZW0oVmlsbGFpbnNMaXN0KTsKCiAgICB2YXIgY29udGVuZGVyID0gZ2VuZXJhdGVHYW1lKF92aWxsYWluKTsgLy8gRmlyc3Qgb25lIGluIHRoZSByYW5nZSB3ZSByZXR1cm4KCiAgICBpZiAoY29udGVuZGVyLmRpZmZpY3VsdHkgPD0gbWF4RGlmZmljdWx0eSAmJiBjb250ZW5kZXIuZGlmZmljdWx0eSA+PSBtaW5EaWZmaWN1bHR5KSB7CiAgICAgIHJldHVybiBjb250ZW5kZXI7CiAgICB9CgogICAgdmFyIGN1cnJlbnRTY29yZSA9IE1hdGguYWJzKGNsb3Nlc3QuZGlmZmljdWx0eSAtIHRhcmdldERpZmZpY3VsdHkpOwogICAgdmFyIGNvbnRlbmRlclNjb3JlID0gTWF0aC5hYnMoY29udGVuZGVyLmRpZmZpY3VsdHkgLSB0YXJnZXREaWZmaWN1bHR5KTsKCiAgICBpZiAoY29udGVuZGVyU2NvcmUgPCBjdXJyZW50U2NvcmUpIHsKICAgICAgY2xvc2VzdCA9IGNvbnRlbmRlcjsKICAgIH0KICB9IHdoaWxlIChjb3VudCA8IG1heFRyaWVzKTsKCiAgcmV0dXJuIGNsb3Nlc3Q7Cn07CmV4cG9ydCB2YXIgZ2VuZXJhdGVHYW1lT3B0aW9uID0gZnVuY3Rpb24gZ2VuZXJhdGVHYW1lT3B0aW9uKG1pbkRpZmZpY3VsdHksIG1heERpZmZpY3VsdHksIGV4aXN0aW5nVXBncmFkZXMpIHsKICB2YXIgdHlwZXMgPSByYW5kb21JdGVtc0V4Y2x1ZGluZygyLCBVcGdyYWRlQ2F0ZWdvcmllc0xpc3QsIFtdLCBleGlzdGluZ1VwZ3JhZGVzKTsKICB2YXIgZ2FtZSA9IGdlbmVyYXRlVGFyZ2V0R2FtZShtaW5EaWZmaWN1bHR5LCBtYXhEaWZmaWN1bHR5KTsKICBnYW1lLnJld2FyZFR5cGVzID0gdHlwZXM7CiAgcmV0dXJuIHsKICAgIGdhbWU6IGdhbWUKICB9Owp9OwpleHBvcnQgdmFyIGdlbmVyYXRlR2FtZSA9IGZ1bmN0aW9uIGdlbmVyYXRlR2FtZSh2aWxsYWluKSB7CiAgLy8gRWFjaCB2aWxsYWluIGhhcyB0aGVpciBvd24gbGlzdCBvZiBzZXRzIHRoYXQgbXVzdCBiZSBpbmNsdWRlZAogIHZhciBzZXRzID0gdmlsbGFpbi5zZXRzLm1hcChmdW5jdGlvbiAobmFtZSkgewogICAgdmFyIHNldCA9IEVuY291bnRlclNldHNMaXN0LmZpbmQoZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUubmFtZSA9PSBuYW1lOwogICAgfSk7CgogICAgaWYgKCFzZXQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW50IGZpbmQgdmlsbGFpblwncyBlbmNvdW50ZXIgc2V0Jyk7CiAgICB9CgogICAgcmV0dXJuIHNldDsKICB9KTsKCiAgaWYgKCF2aWxsYWluLm5vRXh0cmFTZXRzKSB7CiAgICAoZnVuY3Rpb24gKCkgewogICAgICAvLyBFYWNoIGdhbWUgZ2V0cyBvbmUgcmFuZG9tIGVuY291bnRlciBhdXRvbWF0aWNhbGx5CiAgICAgIC8vIFdlIGxvb3AgdW50aWwgd2UgZmluZCBvbmUgdGhhdCBJU04nVCBwYXJ0IG9mIHRoZWlyIHZpbGxhaW4ncyBiYXNlIGVuY291bnRlciBzZXQKICAgICAgdmFyIHJhbmRvbVNldDsKICAgICAgdmFyIG5vTG9vcCA9IDA7CgogICAgICBkbyB7CiAgICAgICAgbm9Mb29wKys7CiAgICAgICAgcmFuZG9tU2V0ID0gcmFuZG9tSXRlbShFbmNvdW50ZXJTZXRzTGlzdCk7CiAgICAgIH0gd2hpbGUgKHJhbmRvbVNldC5ib3NzIHx8IHNldHMuZmluZEluZGV4KGZ1bmN0aW9uIChzKSB7CiAgICAgICAgcmV0dXJuIHMubmFtZSA9PSByYW5kb21TZXQubmFtZTsKICAgICAgfSkgIT0gLTEgJiYgbm9Mb29wIDwgMTAwMDApOwoKICAgICAgc2V0cy5wdXNoKHJhbmRvbVNldCk7CiAgICB9KSgpOwogIH0gLy8gSWYgZXhwZXJ0IGlzbid0IGluIHRoZXJlLCB0aGVyZSdzIGEgMTAlIGNoYW5jZSB0byBhZGQgaXQKCgogIGlmIChzZXRzLmZpbmRJbmRleChmdW5jdGlvbiAodmFsKSB7CiAgICByZXR1cm4gdmFsLm5hbWUgPT0gRXhwZXJ0Lm5hbWU7CiAgfSkgPT0gLTEpIHsKICAgIGlmIChwZXJjZW50Q2hhbmNlKDEwKSkgewogICAgICBzZXRzLnB1c2goRXhwZXJ0KTsKICAgIH0KICB9CgogIHZhciBnYW1lID0gewogICAgdmlsbGFpbjogdmlsbGFpbiwKICAgIHJld2FyZFR5cGVzOiBbXSwKICAgIHN0YXR1czogJ25leHQnLAogICAgbnVtYmVyOiAwLAogICAgZW5jb3VudGVyU2V0czogc2V0cywKICAgIGRpZmZpY3VsdHk6IDAsCiAgICBjaGFsbGVuZ2VzOiBbXSwKICAgIGhlcm9MZXZlbDogMCwKICAgIGlkOiAnJwogIH07CiAgLyovLyAxMCUgY2hhbmNlIGZvciBoZXJvIGxldmVsIDENCiAgaWYgKHBlcmNlbnRDaGFuY2UoMTApKSB7DQogICAgICBnYW1lLmhlcm9MZXZlbCsrDQogIH0qLwogIC8vIENoYWxsZW5nZXMgYXJlIGN1c3RvbSBzZXR1cCB0aGluZ3MgdGhhdCBtYWtlIGl0IGhhcmRlcgogIC8vIFRoZXkgYXJlbid0IHBhcnQgb2YgdGhlIGNvcmUgZ2FtZQogIC8vIFRoZXJlJ3MgYSBiYXNlIGNoYW5jZSB0byBnZXQgb25lIGNoYWxsZW5nZQogIC8vIFdlIGtlZXAgcmVkdWNpbmcgdGhhdCBjaGFuY2UgYnkgNSUgYW5kIHRyeWluZyBhZ2Fpbiwgb24gYSBsb29wCiAgLy8gVGhlIGxvb3Agc3RvcHMgaWYgeW91IGV2ZXIgZmFpbCB0byBnZXQgYSBjaGFsbGVuZ2UKCiAgdmFyIGNoYWxsZW5nZVBlcmNlbnQgPSA1MDsKCiAgd2hpbGUgKHBlcmNlbnRDaGFuY2UoY2hhbGxlbmdlUGVyY2VudCkpIHsKICAgIHZhciBjaGFsbGVuZ2UgPSByYW5kb21DaGFsbGVuZ2UoKTsKICAgIGdhbWUuY2hhbGxlbmdlcy5wdXNoKGNoYWxsZW5nZSk7CiAgICBjaGFsbGVuZ2VQZXJjZW50IC09IDU7CiAgfQoKICBnYW1lLmRpZmZpY3VsdHkgPSBnZXRHYW1lRGlmZmljdWx0eShnYW1lKTsKICBnYW1lLmlkID0gZ2V0R2FtZUlkKGdhbWUpOwogIHJldHVybiBnYW1lOwp9OwpleHBvcnQgdmFyIGdlbmVyYXRlR2FtZXMgPSBmdW5jdGlvbiBnZW5lcmF0ZUdhbWVzKCkgewogIHZhciBwb3NzaWJsZVZpbGxhaW5LZXlzID0gVmlsbGFpbnNMaXN0Lm1hcChmdW5jdGlvbiAodikgewogICAgcmV0dXJuIHYua2V5OwogIH0pOwogIHZhciBudW1HYW1lcyA9IDQ7CiAgdmFyIHZpbGxhaW5LZXlzID0gcmFuZG9tSXRlbXNFeGNsdWRpbmcobnVtR2FtZXMsIHBvc3NpYmxlVmlsbGFpbktleXMsIFtdKTsKICB2YXIgZ2FtZXMgPSBbXTsgLy8gVG8gdHJ5IHRvIG1ha2UgdGhlc2UgbGVzcyBzcGlrZXksIHdlJ3JlIGdlbmVyYXRpbmcgbWFueSBkaWZmZXJlbnQgZ2FtZXMgcmFuZG9tbHkKICAvLyBUaGVuIHdlJ3JlIG9yZGVyaW5nIHRoZW0gYnkgdGhlaXIgZGlmZmljdWx0eSwgYW5kIHBpY2tpbmcgb25lIGZyb20gYSBkaWZmZXJlbnQgcGxhY2UKICAvLyBpbiB0aGUgbGlzdCBmb3IgZWFjaCBnYW1lIGluIHRoZSBydW4KCiAgZm9yICh2YXIgaSA9IDA7IGkgPCAyMDA7IGkrKykgewogICAgdmlsbGFpbktleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBpZHgpIHsKICAgICAgdmFyIHZpbGxhaW4gPSBWaWxsYWluc01hcFtrZXldOwogICAgICB2YXIgZ2FtZSA9IGdlbmVyYXRlR2FtZSh2aWxsYWluKTsKICAgICAgZ2FtZXMucHVzaChnYW1lKTsKICAgIH0pOwogIH0KCiAgdmFyIHNvcnRlZCA9IGdhbWVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgIHJldHVybiBhLmRpZmZpY3VsdHkgPCBiLmRpZmZpY3VsdHkgPyAtMSA6IDE7CiAgfSk7CiAgdmFyIHBhZ2VTaXplID0gTWF0aC5mbG9vcihzb3J0ZWQubGVuZ3RoIC8gbnVtR2FtZXMpOwogIHZhciBjaG9zZW4gPSBbXTsKCiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gbnVtR2FtZXM7IGkrKykgewogICAgdmFyIG1pbiA9IChpIC0gMSkgKiBwYWdlU2l6ZTsKICAgIHZhciBtYXggPSBtaW4gKyBwYWdlU2l6ZTsKICAgIGNob3Nlbi5wdXNoKHNvcnRlZFtnZXRSYW5kb21JbnQobWluLCBtYXgpXSk7CiAgfQoKICByZXR1cm4gY2hvc2VuOwp9OwpleHBvcnQgdmFyIGdldEdhbWVEaWZmaWN1bHR5ID0gZnVuY3Rpb24gZ2V0R2FtZURpZmZpY3VsdHkoZ2FtZSkgewogIHZhciBkaWZmID0gZ2FtZS52aWxsYWluLmRpZmZpY3VsdHk7CiAgdmFyIG11bHRpcGxpZXIgPSAxOwogIGdhbWUuZW5jb3VudGVyU2V0cy5mb3JFYWNoKGZ1bmN0aW9uIChzZXQpIHsKICAgIGRpZmYgKz0gc2V0LmRpZmZpY3VsdHk7CiAgfSk7CiAgZ2FtZS5jaGFsbGVuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGNoYSkgewogICAgZGlmZiArPSBjaGEuZGlmZmljdWx0eTsKICB9KTsKICBkaWZmICo9IG11bHRpcGxpZXI7CiAgZGlmZiArPSBkaWZmICogKGdhbWUuaGVyb0xldmVsICogMS4yNSk7IC8vIDI1JSBoYXJkZXIgZm9yIGVhY2ggaGVybyBsZXZlbAoKICByZXR1cm4gTWF0aC5yb3VuZChkaWZmKTsKfTsKZXhwb3J0IHZhciBnZXRHYW1lSWQgPSBmdW5jdGlvbiBnZXRHYW1lSWQoZ2FtZSkgewogIHJldHVybiBbZ2FtZS52aWxsYWluLm5hbWUsIGdhbWUuZW5jb3VudGVyU2V0cy5tYXAoZnVuY3Rpb24gKGVjKSB7CiAgICByZXR1cm4gZWMubmFtZTsKICB9KS5qb2luKCctJyksIGdhbWUuY2hhbGxlbmdlcy5tYXAoZnVuY3Rpb24gKGMpIHsKICAgIHJldHVybiBjLm5hbWU7CiAgfSkuam9pbignLScpXS5qb2luKCdfJyk7Cn07"},{"version":3,"sources":["C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\src\\lib\\game.ts"],"names":[],"mappings":"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","sourcesContent":["import {Game} from \"@/types/game\";\r\nimport {VillainsList, VillainsMap} from \"@/consts/villains\";\r\nimport {getRandomInt, percentChance, randomItem, randomItemsExcluding} from \"@/lib/random\";\r\nimport {Villain} from \"@/types/villain\";\r\nimport {EncounterSetsMap, EncounterSetsList, Expert} from \"@/consts/encountersets\";\r\nimport {randomChallenge} from \"@/consts/challenges\";\r\nimport {EncounterSet} from \"@/types/encounterset\";\r\nimport {GameOption} from \"@/types/gameoption\";\r\nimport {UpgradeCategoriesList} from \"@/consts/upgrades\";\r\nimport {UpgradeCategory} from \"@/types/upgrade\";\r\n\r\ninterface HasDifficulty {\r\n\tdifficulty: number\r\n}\r\n\r\nexport const generateTargetGame = (minDifficulty: number, maxDifficulty: number) : Game => {\r\n\tlet count = 0\r\n\tconst maxTries = 500\r\n\tconst villain = randomItem(VillainsList)\r\n\tlet closest : Game = generateGame(villain)\r\n\tconst targetDifficulty = (minDifficulty + maxDifficulty) / 2\r\n\tdo {\r\n\t\tcount++\r\n\t\tconst villain = randomItem(VillainsList)\r\n\t\tconst contender = generateGame(villain)\r\n\r\n\t\t// First one in the range we return\r\n\t\tif (contender.difficulty <= maxDifficulty && contender.difficulty >= minDifficulty) {\r\n\t\t\treturn contender\r\n\t\t}\r\n\r\n\t\tconst currentScore = Math.abs(closest.difficulty - targetDifficulty)\r\n\t\tconst contenderScore = Math.abs(contender.difficulty - targetDifficulty)\r\n\t\tif (contenderScore < currentScore) {\r\n\t\t\tclosest = contender\r\n\t\t}\r\n\t} while(count < maxTries);\r\n\treturn closest\r\n}\r\n\r\nexport const generateGameOption  = (minDifficulty: number, maxDifficulty: number, existingUpgrades: UpgradeCategory[]) : GameOption => {\r\n\tconst types = randomItemsExcluding<UpgradeCategory>(2, UpgradeCategoriesList, [], existingUpgrades)\r\n\tconst game = generateTargetGame(minDifficulty, maxDifficulty)\r\n\tgame.rewardTypes = types\r\n\treturn {\r\n\t\tgame: game\r\n\t}\r\n}\r\n\r\nexport const generateGame = (villain: Villain) : Game => {\r\n\t// Each villain has their own list of sets that must be included\r\n\tconst sets = villain.sets.map((name) => {\r\n\t\tconst set = EncounterSetsList.find((e: any) => e.name == name)\r\n\t\tif (!set) {\r\n\t\t\tthrow new Error('cant find villain\\'s encounter set')\r\n\t\t}\r\n\t\treturn set\r\n\t})\r\n\r\n\tif (!villain.noExtraSets) {\r\n\t\t// Each game gets one random encounter automatically\r\n\t\t// We loop until we find one that ISN'T part of their villain's base encounter set\r\n\t\tlet randomSet : EncounterSet\r\n\t\tlet noLoop = 0\r\n\t\tdo {\r\n\t\t\tnoLoop++\r\n\t\t\trandomSet = randomItem(EncounterSetsList)\r\n\t\t} while(randomSet.boss || sets.findIndex(s => s.name == randomSet.name) != -1 && noLoop < 10000)\r\n\t\tsets.push(randomSet)\r\n\t}\r\n\r\n\t// If expert isn't in there, there's a 10% chance to add it\r\n\tif (sets.findIndex(val => val.name == Expert.name) == -1) {\r\n\t\tif (percentChance(10)) {\r\n\t\t\tsets.push(Expert)\r\n\t\t}\r\n\t}\r\n\r\n\tconst game: Game = {\r\n\t\tvillain: villain,\r\n\t\trewardTypes: [],\r\n\t\tstatus: 'next',\r\n\t\tnumber: 0,\r\n\t\tencounterSets: sets,\r\n\t\tdifficulty: 0,\r\n\t\tchallenges: [],\r\n\t\theroLevel: 0,\r\n\t\tid: ''\r\n\t}\r\n\r\n\t/*// 10% chance for hero level 1\r\n\tif (percentChance(10)) {\r\n\t\tgame.heroLevel++\r\n\t}*/\r\n\r\n\t// Challenges are custom setup things that make it harder\r\n\t// They aren't part of the core game\r\n\t// There's a base chance to get one challenge\r\n\t// We keep reducing that chance by 5% and trying again, on a loop\r\n\t// The loop stops if you ever fail to get a challenge\r\n\tlet challengePercent = 50\r\n\twhile (percentChance(challengePercent)) {\r\n\t\tconst challenge = randomChallenge()\r\n\t\tgame.challenges.push(challenge)\r\n\t\tchallengePercent -= 5\r\n\t}\r\n\r\n\tgame.difficulty = getGameDifficulty(game)\r\n\tgame.id = getGameId(game)\r\n\treturn game\r\n}\r\n\r\nexport const generateGames = () : Game[] => {\r\n\tconst possibleVillainKeys = VillainsList.map((v : Villain) => v.key)\r\n\tconst numGames = 4\r\n\r\n\tconst villainKeys : string[] = randomItemsExcluding<string>(numGames, possibleVillainKeys, [])\r\n\r\n\tconst games : Game[] = []\r\n\r\n\t// To try to make these less spikey, we're generating many different games randomly\r\n\t// Then we're ordering them by their difficulty, and picking one from a different place\r\n\t// in the list for each game in the run\r\n\tfor (var i = 0; i < 200; i++) {\r\n\t\tvillainKeys.forEach((key, idx) => {\r\n\t\t\tconst villain = VillainsMap[key]\r\n\t\t\tconst game = generateGame(villain)\r\n\t\t\tgames.push(game)\r\n\t\t})\r\n\t}\r\n\r\n\tconst sorted = games.sort((a, b) => {\r\n\t\treturn a.difficulty < b.difficulty ? -1 : 1\r\n\t})\r\n\r\n\tconst pageSize = Math.floor(sorted.length / numGames)\r\n\r\n\tconst chosen = []\r\n\tfor (var i = 1; i <= numGames; i++) {\r\n\t\tconst min = (i - 1) * pageSize\r\n\t\tconst max = min + pageSize\r\n\t\tchosen.push(sorted[getRandomInt(min, max)])\r\n\t}\r\n\r\n\treturn chosen\r\n}\r\n\r\nexport const getGameDifficulty = (game: Game) : number => {\r\n\tlet diff = game.villain.difficulty\r\n\tlet multiplier = 1\r\n\tgame.encounterSets.forEach((set) => {\r\n\t\tdiff += set.difficulty\r\n\t})\r\n\r\n\tgame.challenges.forEach((cha) => {\r\n\t\tdiff += cha.difficulty\r\n\t})\r\n\r\n\tdiff *= multiplier\r\n\r\n\tdiff += diff * (game.heroLevel * 1.25) // 25% harder for each hero level\r\n\r\n\treturn Math.round(diff)\r\n}\r\n\r\nexport const getGameId = (game: Game) : string => {\r\n\treturn [\r\n\t\tgame.villain.name,\r\n\t\tgame.encounterSets.map(ec => ec.name).join('-'),\r\n\t\tgame.challenges.map(c => c.name).join('-')\r\n\t].join('_')\r\n}\r\n"],"sourceRoot":""}]}