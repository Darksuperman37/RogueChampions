{"remainingRequest":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\ts-loader\\index.js??ref--14-3!C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\src\\lib\\upgrades.ts","dependencies":[{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\src\\lib\\upgrades.ts","mtime":1635958865776},{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiQzovVXNlcnMvSm9uYXRoYW4vRG9jdW1lbnRzL0dpdEh1Yi9Sb2d1ZUNoYW1waW9ucy9Sb2d1ZUNoYW1waW9ucy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IHsgcmFuZG9tSXRlbXNFeGNsdWRpbmcsIHNodWZmbGUgfSBmcm9tICJAL2xpYi9yYW5kb20iOwppbXBvcnQgeyBVcGdyYWRlc0xpc3QsIFVwZ3JhZGVzTWFwIH0gZnJvbSAiQC9jb25zdHMvdXBncmFkZXMiOyAvLyBHaXZlbiBhIGxpc3Qgb2YgZXhwYW5zaW9ucyBpdCB3aWxsIHJldHVybiBhIGZ1bGwgbGlzdCBvZiB1cGdyYWRlcyB0aGF0IGFyZSBjb21wYXRpYmxlCi8vIHdpdGggdGhvc2UgZXhwYW5zaW9ucwoKZXhwb3J0IHZhciBnZXRFeHBhbnNpb25zVXBncmFkZXMgPSBmdW5jdGlvbiBnZXRFeHBhbnNpb25zVXBncmFkZXMoZXhwYW5zaW9ucykgewogIHJldHVybiBVcGdyYWRlc0xpc3QuZmlsdGVyKGZ1bmN0aW9uICh1cGdyYWRlKSB7CiAgICBpZiAodXBncmFkZS5yZXF1aXJlcyA9PT0gbnVsbCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4cGFuc2lvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGV4cGFuc2lvbnNbaV0ubmFtZSA9PT0gdXBncmFkZS5yZXF1aXJlcykgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0pOwp9OwpleHBvcnQgdmFyIGdlbmVyYXRlVXBncmFkZU9wdGlvbnMgPSBmdW5jdGlvbiBnZW5lcmF0ZVVwZ3JhZGVPcHRpb25zKHBsYXllciwgZXhwYW5zaW9ucywgY2F0ZWdvcmllcywgcGxheWVycykgewogIHZhciBwb3NzaWJsZVVwcyA9IGdldEV4cGFuc2lvbnNVcGdyYWRlcyhleHBhbnNpb25zKTsgLy8gRmlsdGVyIGJhc2VkIG9uIGNhdGVnb3J5CgogIHBvc3NpYmxlVXBzID0gcG9zc2libGVVcHMuZmlsdGVyKGZ1bmN0aW9uICh1cGdyYWRlKSB7CiAgICByZXR1cm4gY2F0ZWdvcmllcy5pbmRleE9mKHVwZ3JhZGUuY2F0ZWdvcnkpID49IDA7CiAgfSk7IC8vIEZpbHRlciBiYXNlZCBvbiBoZXJvCgogIHBvc3NpYmxlVXBzID0gcG9zc2libGVVcHMuZmlsdGVyKGZ1bmN0aW9uICh1cGdyYWRlKSB7CiAgICBpZiAoIXVwZ3JhZGUucmVxdWlyZXNIZXJvKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHJldHVybiB1cGdyYWRlLnJlcXVpcmVzSGVybyA9PSBwbGF5ZXIuaGVyby5uYW1lOwogIH0pOyAvLyBGaWx0ZXIgb3V0IHVwZ3JhZGVzIHRoYXQgY2FuJ3QgYmUgcGFpcmVkIHdpdGggY2VydGFpbiBoZXJvcwoKICBwb3NzaWJsZVVwcyA9IHBvc3NpYmxlVXBzLmZpbHRlcihmdW5jdGlvbiAodXBncmFkZSkgewogICAgaWYgKCF1cGdyYWRlLmNvbmZsaWN0aW5nSGVyb2VzIHx8IHVwZ3JhZGUuY29uZmxpY3RpbmdIZXJvZXMubGVuZ3RoID09IDApIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGF5ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmICh1cGdyYWRlLmNvbmZsaWN0aW5nSGVyb2VzLmluZGV4T2YocGxheWVyc1tpXS5oZXJvLm5hbWUpID49IDApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9KTsKICB2YXIgbmFtZXMgPSBwb3NzaWJsZVVwcy5tYXAoZnVuY3Rpb24gKHgpIHsKICAgIHJldHVybiB4Lm5hbWU7CiAgfSk7CiAgdmFyIGV4aXN0aW5nID0gcGxheWVyLnVwZ3JhZGVzLm1hcChmdW5jdGlvbiAoeCkgewogICAgcmV0dXJuIHgubmFtZTsKICB9KTsKICB2YXIgc2VsZWN0ZWQgPSByYW5kb21JdGVtc0V4Y2x1ZGluZygzLCBuYW1lcywgZXhpc3RpbmcpOwogIHZhciB1cGdyYWRlcyA9IHNlbGVjdGVkLm1hcChmdW5jdGlvbiAobmFtZSkgewogICAgdmFyIHVwID0gVXBncmFkZXNNYXBbbmFtZV07IC8vIFRFU1RJTkcKICAgIC8vIFlvdSBjYW4gdHVybiB0aGlzIG9uIHRvIG1ha2Ugc3VyZSB1cGdyYWRlIGRlc2NyaXB0aW9ucyBhcmUgZGlzcGxheSBjYXJlZnVsbHkKICAgIC8vdXAubGV2ZWwgPSB1cC5tYXhMZXZlbC0xCiAgICAvL3VwLmxldmVsID0gZ2V0UmFuZG9tSW50KDEsIHVwLm1heExldmVsIHx8IDEpCgogICAgcmV0dXJuIHVwOwogIH0pOwogIHNodWZmbGUodXBncmFkZXMpOwogIHJldHVybiB1cGdyYWRlczsKfTsKZXhwb3J0IGZ1bmN0aW9uIGRlZkNhdGVnb3J5KGRlZikgewogIGlmIChkZWYuY2F0ZWdvcnkpIHsKICAgIHJldHVybiBkZWYucmVxdWlyZXNIZXJvID8gJ0hlcm9pYycgOiBkZWYuY2F0ZWdvcnk7CiAgfQoKICByZXR1cm4gZGVmLmNhdGVnb3J5IHx8ICdHZW5lcmFsJzsKfQpleHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVVcGdyYWRlQ2FyZChkZWYpIHsKICB2YXIgY2F0ZWdvcnkgPSBkZWZDYXRlZ29yeShkZWYpOwogIHZhciBtYXhMZXZlbCA9IDE7CgogIGlmICh0eXBlb2YgZGVmLmNvcGllcyAhPSAidW5kZWZpbmVkIikgewogICAgbWF4TGV2ZWwgPSBkZWYuY29waWVzOwogIH0KCiAgdmFyIHVwZ3JhZGUgPSB7CiAgICBuYW1lOiBkZWYubmFtZSwKICAgIGxldmVsOiAxLAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICB2YXIgYXJ0aWNsZSA9IGRlZi5hcnRpY2xlID8gZGVmLmFydGljbGUgKyAnICcgOiAnJzsKICAgICAgdmFyIGF0dGFjaGVkID0gZGVmLmF0dGFjaGVkID8gJyBhdHRhY2hlZCB0byB5b3VyIGhlcm8nIDogJyc7CiAgICAgIHZhciBleGhhdXN0ZWQgPSBkZWYuZXhoYXVzdGVkID8gJyBFeGhhdXN0ICcgKyBkZWYuY2FyZCArICcuJyA6ICcnOwogICAgICB2YXIgbXNnID0gIjxzdHJvbmc+U2V0dXA6PC9zdHJvbmc+IFB1dCAiLmNvbmNhdChhcnRpY2xlLCAiPHN0cm9uZz4iKS5jb25jYXQoZGVmLmNhcmQsICI8L3N0cm9uZz4gaW50byBwbGF5IikuY29uY2F0KGF0dGFjaGVkLCAiLiIpLmNvbmNhdChleGhhdXN0ZWQpOwogICAgICB2YXIgZXh0cmFzID0gdGhpcy5sZXZlbCAtIDE7CgogICAgICBpZiAoZXh0cmFzID4gMCkgewogICAgICAgIGlmIChleHRyYXMgPT0gMSkgewogICAgICAgICAgbXNnICs9ICcgUmVwZWF0IGZvciBhbm90aGVyICcgKyBkZWYuY2FyZCArICcuJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbXNnICs9ICcgUmVwZWF0ICcgKyBleHRyYXMgKyAnIHRpbWVzLic7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbXNnOwogICAgfSwKICAgIGxldmVsVXBNZXNzYWdlOiBmdW5jdGlvbiBsZXZlbFVwTWVzc2FnZSgpIHsKICAgICAgaWYgKG1heExldmVsID09IDEpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIHJldHVybiAnUHV0IGFuIGV4dHJhIGNvcHkgaW50byBwbGF5Lic7CiAgICB9LAogICAgcmVxdWlyZXM6IGRlZi5yZXF1aXJlcywKICAgIHJlcXVpcmVzSGVybzogZGVmLnJlcXVpcmVzSGVybywKICAgIG1heExldmVsOiBtYXhMZXZlbCwKICAgIGNhdGVnb3J5OiBjYXRlZ29yeQogIH07CiAgcmV0dXJuIHVwZ3JhZGU7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRXhoYXVzdGVkQ2FyZEluUGxheShkZWYpIHsKICB2YXIgY2F0ZWdvcnkgPSBkZWZDYXRlZ29yeShkZWYpOwogIHZhciB1cGdyYWRlID0gewogICAgbmFtZTogZGVmLm5hbWUsCiAgICBsZXZlbDogMSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgdmFyIGRlc2MgPSBjYXJkSW5QbGF5KGRlZi5jYXJkLCB0aGlzLmxldmVsID09IDEsIGRlZi5hcnRpY2xlLCBkZWYudGhleSk7CiAgICAgIHJldHVybiBkZXNjOwogICAgfSwKICAgIHJlcXVpcmVzOiBkZWYucmVxdWlyZXMsCiAgICBsZXZlbFVwTWVzc2FnZTogZnVuY3Rpb24gbGV2ZWxVcE1lc3NhZ2UoKSB7CiAgICAgIHJldHVybiAiRG9lcyBub3QgZW50ZXIgcGxheSBleGhhdXN0ZWQiOwogICAgfSwKICAgIG1heExldmVsOiBkZWYubWF4TGV2ZWwgfHwgMiwKICAgIHJlcXVpcmVzSGVybzogZGVmLnJlcXVpcmVzSGVybywKICAgIGNhdGVnb3J5OiBjYXRlZ29yeQogIH07CiAgcmV0dXJuIHVwZ3JhZGU7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ291bnRlckNhcmRJblBsYXkoZGVmKSB7CiAgdmFyIG1heExldmVsID0gZGVmLm1heExldmVsOyAvLyBJZiBubyBtYXggbGV2ZWwgaGFzIGJlZW4gcHJvdmlkZWQsIGJ1dCB3ZSBoYXZlIGRlZmluZWQgdGhlIGV4dHJhIGNvdW50ZXJzIHlvdSB3b3VsZAogIC8vIGdldCBhdCBlYWNoIGxldmVsLCB0aGVuIHdlIGNhbiB1c2UgdGhhdCB0byBkZXRlcm1pbmUgbWF4IGxldmVsCgogIGlmICghZGVmLm1heExldmVsICYmIGRlZi5leHRyYUNvdW50ZXJzICYmIF90eXBlb2YoZGVmLmV4dHJhQ291bnRlcnMpID09ICdvYmplY3QnKSB7CiAgICBkZWYubWF4TGV2ZWwgPSBPYmplY3Qua2V5cyhkZWYuZXh0cmFDb3VudGVycykubGVuZ3RoOwogIH0KCiAgdmFyIHVwZ3JhZGUgPSB7CiAgICBuYW1lOiBkZWYubmFtZSwKICAgIGdldEV4dHJhQ291bnRlcnM6IGZ1bmN0aW9uIGdldEV4dHJhQ291bnRlcnMobGV2ZWwpIHsKICAgICAgcmV0dXJuIGRlZi5leHRyYUNvdW50ZXJzW2xldmVsXSB8fCAwOwogICAgfSwKICAgIGV4dHJhQ291bnRlcnNNc2c6IGZ1bmN0aW9uIGV4dHJhQ291bnRlcnNNc2coZXh0cmFDb3VudGVycykgewogICAgICB2YXIgZXh0cmEgPSBleHRyYUNvdW50ZXJzID09IDEgPyAnJyA6IGV4dHJhQ291bnRlcnMgKyAnICc7CgogICAgICBpZiAoZXh0cmFDb3VudGVycyA9PSAxKSB7CiAgICAgICAgcmV0dXJuICJQdXQgYW4gZXh0cmEgY291bnRlciBvbiAiICsgZGVmLnByb25vdW4gKyAnLic7CiAgICAgIH0KCiAgICAgIHJldHVybiAnUHV0ICcgKyBleHRyYSArICcgZXh0cmEgY291bnRlcnMgb24gJyArIGRlZi5wcm9ub3VuICsgJy4nOwogICAgfSwKICAgIGxldmVsOiAxLAogICAgbWF4TGV2ZWw6IGRlZi5tYXhMZXZlbCwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgdmFyIGRlc2MgPSBjYXJkSW5QbGF5KGRlZi5jYXJkLCBkZWYuZXhoYXVzdGVkLCBkZWYuYXJ0aWNsZSwgZGVmLnRoZXkpOwogICAgICB2YXIgZXh0cmFDb3VudGVycyA9IHRoaXMuZ2V0RXh0cmFDb3VudGVycyh0aGlzLmxldmVsKTsKCiAgICAgIGlmIChleHRyYUNvdW50ZXJzID4gMCkgewogICAgICAgIGRlc2MgKz0gJyAnICsgdGhpcy5leHRyYUNvdW50ZXJzTXNnKGV4dHJhQ291bnRlcnMpOwogICAgICB9CgogICAgICByZXR1cm4gZGVzYzsKICAgIH0sCiAgICByZXF1aXJlczogZGVmLnJlcXVpcmVzLAogICAgcmVxdWlyZXNIZXJvOiBkZWYucmVxdWlyZXNIZXJvLAogICAgbGV2ZWxVcE1lc3NhZ2U6IGZ1bmN0aW9uIGxldmVsVXBNZXNzYWdlKCkgewogICAgICB2YXIgY3VycmVudENvdW50ZXJzID0gdGhpcy5nZXRFeHRyYUNvdW50ZXJzKHRoaXMubGV2ZWwpOwogICAgICB2YXIgbmV3Q291bnRlcnMgPSB0aGlzLmdldEV4dHJhQ291bnRlcnModGhpcy5sZXZlbCArIDEpOwoKICAgICAgaWYgKGN1cnJlbnRDb3VudGVycyA9PSAwICYmIG5ld0NvdW50ZXJzID4gMCkgewogICAgICAgIHJldHVybiB0aGlzLmV4dHJhQ291bnRlcnNNc2cobmV3Q291bnRlcnMpOwogICAgICB9CgogICAgICByZXR1cm4gIkV4dHJhIGNvdW50ZXJzOiAiLmNvbmNhdChjdXJyZW50Q291bnRlcnMsICIgYmVjb21lcyA8c3Ryb25nPiIpLmNvbmNhdChuZXdDb3VudGVycywgIjwvc3Ryb25nPiIpOwogICAgfSwKICAgIGNhdGVnb3J5OiBkZWZDYXRlZ29yeShkZWYpLAogICAgY29uZmxpY3RpbmdIZXJvZXM6IGRlZi5jb25mbGljdGluZ0hlcm9lcwogIH07CiAgcmV0dXJuIHVwZ3JhZGU7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQWxseUNhcmQoZGVmKSB7CiAgdmFyIHVwZ3JhZGUgPSB7CiAgICBuYW1lOiBkZWYubmFtZSwKICAgIGdldERhbWFnZUNvdW50ZXJzOiBmdW5jdGlvbiBnZXREYW1hZ2VDb3VudGVycyhsZXZlbCkgewogICAgICBpZiAoZGVmLmxldmVscyAmJiBkZWYubGV2ZWxzW2xldmVsIC0gMV0pIHsKICAgICAgICByZXR1cm4gZGVmLmxldmVsc1tsZXZlbCAtIDFdLmRhbWFnZSB8fCAwOwogICAgICB9CgogICAgICByZXR1cm4gMDsKICAgIH0sCiAgICBkYW1hZ2VDb3VudGVyc01zZzogZnVuY3Rpb24gZGFtYWdlQ291bnRlcnNNc2coY291bnRlcnMpIHsKICAgICAgaWYgKGNvdW50ZXJzID09IDApIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZWYuY2FyZCArICIgc3RhcnRzIHdpdGggIi5jb25jYXQoY291bnRlcnMsICIgZGFtYWdlIGNvdW50ZXIiKSArIChjb3VudGVycyA9PSAxID8gJycgOiAncycpICsgJyBvbiAnICsgZGVmLnByb25vdW4gKyAnLic7CiAgICB9LAogICAgbGV2ZWw6IDEsCiAgICBtYXhMZXZlbDogZGVmLmxldmVscy5sZW5ndGgsCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHZhciBkZXNjID0gIjxzdHJvbmc+U2V0dXA6PC9zdHJvbmc+IFB1dCA8c3Ryb25nPiIuY29uY2F0KGRlZi5jYXJkLCAiPC9zdHJvbmc+IGludG8gcGxheSB1bmRlciB5b3VyIGNvbnRyb2wuIik7CgogICAgICBpZiAoZGVmLmxldmVsc1t0aGlzLmxldmVsIC0gMV0uZXhoYXVzdGVkKSB7CiAgICAgICAgZGVzYyArPSAiICIuY29uY2F0KGRlZi5jYXJkLCAiIGVudGVycyBwbGF5IGV4aGF1c3RlZC4iKTsKICAgICAgfQoKICAgICAgdmFyIGRtZyA9IHRoaXMuZ2V0RGFtYWdlQ291bnRlcnModGhpcy5sZXZlbCk7CgogICAgICBpZiAoZG1nID4gMCkgewogICAgICAgIGRlc2MgKz0gJyAnICsgdGhpcy5kYW1hZ2VDb3VudGVyc01zZyhkbWcpOwogICAgICB9CgogICAgICBpZiAodGhpcy5pc1RvdWdoKHRoaXMubGV2ZWwpKSB7CiAgICAgICAgZGVzYyArPSAiIEdpdmUgIi5jb25jYXQoZGVmLnByb25vdW4sICIgYSBUb3VnaCBzdGF0dXMgY2FyZC4iKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGRlc2M7CiAgICB9LAogICAgaXNUb3VnaDogZnVuY3Rpb24gaXNUb3VnaChsZXZlbCkgewogICAgICByZXR1cm4gZGVmLmxldmVsc1tsZXZlbCAtIDFdLnRvdWdoIHx8IGZhbHNlOwogICAgfSwKICAgIHJlcXVpcmVzOiBkZWYucmVxdWlyZXMsCiAgICByZXF1aXJlc0hlcm86IGRlZi5yZXF1aXJlc0hlcm8sCiAgICBsZXZlbFVwTWVzc2FnZTogZnVuY3Rpb24gbGV2ZWxVcE1lc3NhZ2UoKSB7CiAgICAgIHZhciBjdXJyZW50ID0gZGVmLmxldmVsc1t0aGlzLmxldmVsIC0gMV07CiAgICAgIHZhciBuZXh0ID0gZGVmLmxldmVsc1t0aGlzLmxldmVsXTsKICAgICAgdmFyIHBhcnRzID0gW107CgogICAgICBpZiAoY3VycmVudC5kYW1hZ2UgIT0gbmV4dC5kYW1hZ2UpIHsKICAgICAgICBwYXJ0cy5wdXNoKCJTdGFydGluZyBEYW1hZ2U6ICIuY29uY2F0KGN1cnJlbnQuZGFtYWdlLCAiIGJlY29tZXMgPHN0cm9uZz4iKS5jb25jYXQobmV4dC5kYW1hZ2UsICI8L3N0cm9uZz4iKSk7CiAgICAgIH0KCiAgICAgIGlmIChuZXh0LnRvdWdoKSB7CiAgICAgICAgcGFydHMucHVzaCgnR2FpbnMgYSBUb3VnaCBzdGF0dXMgY2FyZC4nKTsKICAgICAgfQoKICAgICAgaWYgKGN1cnJlbnQuZXhoYXVzdGVkICYmICFuZXh0LmV4aGF1c3RlZCkgewogICAgICAgIHBhcnRzLnB1c2goJ0RvZXMgbm90IGVudGVyIHBsYXkgZXhoYXVzdGVkLicpOwogICAgICB9CgogICAgICByZXR1cm4gcGFydHMuam9pbignICcpOwogICAgfSwKICAgIGNhdGVnb3J5OiBkZWZDYXRlZ29yeShkZWYpLAogICAgY29uZmxpY3RpbmdIZXJvZXM6IGRlZi5jb25mbGljdGluZ0hlcm9lcwogIH07CiAgcmV0dXJuIHVwZ3JhZGU7Cn0KZXhwb3J0IGZ1bmN0aW9uIGNhcmRJblBsYXkoY2FyZCkgewogIHZhciBleGhhdXN0ZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogIHZhciBhcnRpY2xlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnYSc7CiAgdmFyIHRoZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICdJdCc7CiAgdmFyIGFydGljbGVNc2cgPSBhcnRpY2xlID8gYXJ0aWNsZSArICcgJyA6ICcnOwogIHZhciBkZXNjID0gIjxzdHJvbmc+U2V0dXA6PC9zdHJvbmc+IFB1dCAiLmNvbmNhdChhcnRpY2xlTXNnLCAiPHN0cm9uZz4iKS5jb25jYXQoY2FyZCwgIjwvc3Ryb25nPiBpbnRvIHBsYXkgdW5kZXIgeW91ciBjb250cm9sLiIpOwoKICBpZiAoZXhoYXVzdGVkKSB7CiAgICBkZXNjICs9ICIgIi5jb25jYXQodGhleSwgIiBlbnRlcnMgcGxheSBleGhhdXN0ZWQuIik7CiAgfQoKICByZXR1cm4gZGVzYzsKfQpleHBvcnQgZnVuY3Rpb24gbGV2ZWxVcE1lc3NhZ2VJbmNyZWFzZShudW1CZWZvcmUsIG51bUFmdGVyLCBudW1PZldoYXQsIHBsdXJhbCkgewogIGlmICghcGx1cmFsKSB7CiAgICBwbHVyYWwgPSBudW1PZldoYXQgKyAncyc7CiAgfQoKICByZXR1cm4gIiIuY29uY2F0KG51bUJlZm9yZSwgIiAiKS5jb25jYXQobnVtQmVmb3JlID09IDEgPyBudW1PZldoYXQgOiBwbHVyYWwsICIgYmVjb21lcyA8c3Ryb25nPiIpLmNvbmNhdChudW1BZnRlciwgIiAiKS5jb25jYXQocGx1cmFsLCAiPC9zdHJvbmc+Iik7Cn0="},{"version":3,"sources":["C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Jonathan\\Documents\\GitHub\\RogueChampions\\RogueChampions\\src\\lib\\upgrades.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n\tCardInPlayExtraCounters,\r\n\tDefinition,\r\n\tExhaustedCard, MinionCard,\r\n\tUpgrade,\r\n\tUpgradeCard,\r\n\tUpgradeCategory\r\n} from \"@/types/upgrade\";\r\nimport {getRandomInt, randomItemsExcluding, shuffle} from \"@/lib/random\";\r\nimport {UpgradesList, UpgradesMap} from \"@/consts/upgrades\";\r\nimport {Player} from \"@/types/player\";\r\nimport {Expansion} from \"@/types/expansion\";\r\n\r\n// Given a list of expansions it will return a full list of upgrades that are compatible\r\n// with those expansions\r\nexport const getExpansionsUpgrades = (expansions: Expansion[]) : Upgrade[] => {\r\n\treturn UpgradesList.filter((upgrade : Upgrade) => {\r\n\t\tif (upgrade.requires === null) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tfor (var i = 0; i < expansions.length; i++) {\r\n\t\t\tif (expansions[i].name === upgrade.requires) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t})\r\n}\r\n\r\nexport const generateUpgradeOptions  = (player: Player, expansions: Expansion[], categories: UpgradeCategory[], players: Player[]) : Upgrade[] => {\r\n\tlet possibleUps = getExpansionsUpgrades(expansions)\r\n\r\n\t// Filter based on category\r\n\tpossibleUps = possibleUps.filter((upgrade: Upgrade) => {\r\n\t\treturn categories.indexOf(upgrade.category) >= 0\r\n\t})\r\n\r\n\t// Filter based on hero\r\n\tpossibleUps = possibleUps.filter((upgrade: Upgrade) => {\r\n\t\tif (!upgrade.requiresHero) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn upgrade.requiresHero == player.hero.name\r\n\t})\r\n\r\n\t// Filter out upgrades that can't be paired with certain heros\r\n\tpossibleUps = possibleUps.filter((upgrade: Upgrade) => {\r\n\t\tif (!upgrade.conflictingHeroes || upgrade.conflictingHeroes.length == 0) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tfor (let i = 0; i < players.length; i++) {\r\n\t\t\tif (upgrade.conflictingHeroes.indexOf(players[i].hero.name) >= 0) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true\r\n\t})\r\n\r\n\tconst names = possibleUps.map(x => x.name)\r\n\tconst existing =  player.upgrades.map(x => x.name)\r\n\r\n\tconst selected = randomItemsExcluding<string>(3, names, existing)\r\n\tconst upgrades = selected.map((name) : Upgrade => {\r\n\t\tconst up = UpgradesMap[name]\r\n\r\n\t\t// TESTING\r\n\t\t// You can turn this on to make sure upgrade descriptions are display carefully\r\n\t\t//up.level = up.maxLevel-1\r\n\t\t//up.level = getRandomInt(1, up.maxLevel || 1)\r\n\r\n\t\treturn up\r\n\t})\r\n\tshuffle(upgrades)\r\n\treturn upgrades\r\n}\r\n\r\n\r\nexport function defCategory (def: Definition) : UpgradeCategory {\r\n\tif (def.category) {\r\n\t\treturn def.requiresHero ? 'Heroic' : def.category\r\n\t}\r\n\r\n\treturn def.category || 'General'\r\n}\r\n\r\nexport function generateUpgradeCard (def: UpgradeCard) : Upgrade {\r\n\tconst category = defCategory(def)\r\n\tlet maxLevel = 1\r\n\tif (typeof def.copies != \"undefined\") {\r\n\t\tmaxLevel = def.copies\r\n\t}\r\n\tconst upgrade = {\r\n\t\tname: def.name,\r\n\t\tlevel: 1,\r\n\t\tdescription () {\r\n\t\t\tconst article = def.article ? (def.article + ' ') : ''\r\n\t\t\tconst attached = def.attached ? ' attached to your hero' : ''\r\n\t\t\tconst exhausted = def.exhausted ? ' Exhaust ' + def.card +'.': ''\r\n\t\t\tlet msg = `<strong>Setup:</strong> Put ${article}<strong>${def.card}</strong> into play${attached}.${exhausted}`\r\n\t\t\tconst extras = this.level - 1\r\n\t\t\tif (extras > 0) {\r\n\t\t\t\tif (extras == 1) {\r\n\t\t\t\t\tmsg += ' Repeat for another ' + def.card + '.'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmsg += ' Repeat ' + extras + ' times.'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn msg\r\n\t\t},\r\n\t\tlevelUpMessage () {\r\n\t\t\tif (maxLevel == 1) {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t\treturn 'Put an extra copy into play.'\r\n\t\t},\r\n\t\trequires: def.requires,\r\n\t\trequiresHero: def.requiresHero,\r\n\t\tmaxLevel: maxLevel,\r\n\t\tcategory: category\r\n\t}\r\n\treturn upgrade\r\n}\r\n\r\nexport function generateExhaustedCardInPlay (def: ExhaustedCard) : Upgrade {\r\n\tconst category = defCategory(def)\r\n\tconst upgrade = {\r\n\t\tname: def.name,\r\n\t\tlevel: 1,\r\n\t\tdescription () {\r\n\t\t\tlet desc : string = cardInPlay(def.card, this.level == 1, def.article, def.they)\r\n\t\t\treturn desc\r\n\t\t},\r\n\t\trequires: def.requires,\r\n\t\tlevelUpMessage () {\r\n\t\t\treturn `Does not enter play exhausted`\r\n\t\t},\r\n\t\tmaxLevel: def.maxLevel || 2,\r\n\t\trequiresHero: def.requiresHero,\r\n\t\tcategory: category\r\n\t}\r\n\treturn upgrade\r\n}\r\n\r\nexport function generateCounterCardInPlay (def: CardInPlayExtraCounters) : Upgrade {\r\n\tlet maxLevel = def.maxLevel\r\n\r\n\t// If no max level has been provided, but we have defined the extra counters you would\r\n\t// get at each level, then we can use that to determine max level\r\n\tif (!def.maxLevel && def.extraCounters && typeof def.extraCounters == 'object') {\r\n\t\tdef.maxLevel = Object.keys(def.extraCounters).length\r\n\t}\r\n\r\n\tconst upgrade = {\r\n\t\tname: def.name,\r\n\t\tgetExtraCounters (level: number) {\r\n\t\t\treturn def.extraCounters[level] || 0\r\n\t\t},\r\n\t\textraCountersMsg (extraCounters: number) {\r\n\t\t\tconst extra = extraCounters == 1 ? '' : (extraCounters + ' ')\r\n\t\t\tif (extraCounters == 1) {\r\n\t\t\t\treturn `Put an extra counter on ` + def.pronoun + '.'\r\n\t\t\t}\r\n\t\t\treturn 'Put ' + extra + ' extra counters on ' + def.pronoun + '.'\r\n\t\t},\r\n\t\tlevel: 1,\r\n\t\tmaxLevel: def.maxLevel,\r\n\t\tdescription () {\r\n\t\t\tlet desc : string = cardInPlay(def.card, def.exhausted, def.article, def.they)\r\n\t\t\tconst extraCounters = this.getExtraCounters(this.level)\r\n\t\t\tif (extraCounters > 0) {\r\n\t\t\t\tdesc += ' ' + this.extraCountersMsg(extraCounters)\r\n\t\t\t}\r\n\t\t\treturn desc\r\n\t\t},\r\n\t\trequires: def.requires,\r\n\t\trequiresHero: def.requiresHero,\r\n\t\tlevelUpMessage () {\r\n\t\t\tconst currentCounters = this.getExtraCounters(this.level)\r\n\t\t\tconst newCounters = this.getExtraCounters(this.level+1)\r\n\t\t\tif (currentCounters == 0 && newCounters > 0) {\r\n\t\t\t\treturn this.extraCountersMsg(newCounters)\r\n\t\t\t}\r\n\r\n\t\t\treturn `Extra counters: ${currentCounters} becomes <strong>${newCounters}</strong>`\r\n\t\t},\r\n\t\tcategory: defCategory(def),\r\n\t\tconflictingHeroes: def.conflictingHeroes\r\n\t}\r\n\treturn upgrade\r\n}\r\n\r\nexport function generateAllyCard (def: MinionCard) : Upgrade {\r\n\tconst upgrade = {\r\n\t\tname: def.name,\r\n\t\tgetDamageCounters (level: number) {\r\n\t\t\tif (def.levels && def.levels[level-1]) {\r\n\t\t\t\treturn def.levels[level-1].damage || 0\r\n\t\t\t}\r\n\t\t\treturn 0\r\n\t\t},\r\n\t\tdamageCountersMsg (counters: number) {\r\n\t\t\tif (counters == 0) {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t\treturn def.card + ` starts with ${counters} damage counter` + (counters == 1 ? '' : 's') + ' on ' + def.pronoun + '.'\r\n\t\t},\r\n\t\tlevel: 1,\r\n\t\tmaxLevel: def.levels.length,\r\n\t\tdescription () {\r\n\t\t\tlet desc = `<strong>Setup:</strong> Put <strong>${def.card}</strong> into play under your control.`\r\n\t\t\tif (def.levels[this.level-1].exhausted) {\r\n\t\t\t\tdesc += ` ${def.card} enters play exhausted.`\r\n\t\t\t}\r\n\t\t\tconst dmg = this.getDamageCounters(this.level)\r\n\t\t\tif (dmg > 0) {\r\n\t\t\t\tdesc += ' ' + this.damageCountersMsg(dmg)\r\n\t\t\t}\r\n\t\t\tif (this.isTough(this.level)) {\r\n\t\t\t\tdesc += ` Give ${def.pronoun} a Tough status card.`\r\n\t\t\t}\r\n\t\t\treturn desc\r\n\t\t},\r\n\t\tisTough (level: number) : boolean {\r\n\t\t\treturn def.levels[level-1].tough || false\r\n\t\t},\r\n\t\trequires: def.requires,\r\n\t\trequiresHero: def.requiresHero,\r\n\t\tlevelUpMessage () {\r\n\t\t\tconst current = def.levels[this.level-1]\r\n\t\t\tconst next = def.levels[this.level]\r\n\t\t\tconst parts = []\r\n\t\t\tif (current.damage != next.damage) {\r\n\t\t\t\tparts.push(`Starting Damage: ${current.damage} becomes <strong>${next.damage}</strong>`)\r\n\t\t\t}\r\n\t\t\tif (next.tough) {\r\n\t\t\t\tparts.push('Gains a Tough status card.')\r\n\t\t\t}\r\n\t\t\tif (current.exhausted && !next.exhausted) {\r\n\t\t\t\tparts.push('Does not enter play exhausted.')\r\n\t\t\t}\r\n\t\t\treturn parts.join(' ')\r\n\t\t},\r\n\t\tcategory: defCategory(def),\r\n\t\tconflictingHeroes: def.conflictingHeroes\r\n\t}\r\n\treturn upgrade\r\n}\r\n\r\nexport function cardInPlay(card: string, exhausted = false, article = 'a', they = 'It') : string {\r\n\tconst articleMsg = article ? (article + ' ') : ''\r\n\tlet desc = `<strong>Setup:</strong> Put ${articleMsg}<strong>${card}</strong> into play under your control.`\r\n\tif (exhausted) {\r\n\t\tdesc += ` ${they} enters play exhausted.`\r\n\t}\r\n\treturn desc\r\n}\r\n\r\nexport function levelUpMessageIncrease (numBefore: number, numAfter: number, numOfWhat: string, plural?: string) : string {\r\n\tif (!plural) {\r\n\t\tplural = numOfWhat + 's'\r\n\t}\r\n\treturn `${numBefore} ${numBefore == 1 ? numOfWhat : plural} becomes <strong>${numAfter} ${plural}</strong>`\r\n}\r\n\r\n"],"sourceRoot":""}]}